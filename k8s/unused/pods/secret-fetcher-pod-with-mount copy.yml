# Simple Kubernetes Pod to deploy the app contained in nigelpoulton/getting-started-k8s:1.0
apiVersion: v1
kind: Pod
metadata:
  name: kyler-secret-fetcher
  labels:
    app: kyler-is-cool
spec:
  serviceAccountName: kyler-secret-fetcher-sa
  
  volumes:
  - name: secrets-store-inline
    csi:
      driver: secrets-store.csi.k8s.io
      readOnly: true
      volumeAttributes:
        secretProviderClass: "kyler-secrets-provider-name"
  
  containers:
    - name: kyler-secret-fetcher
      image: kymiddallscripts/secrets-test:latest
      volumeMounts:
        - name: secrets-store-inline
          mountPath: "/mnt/secrets-store"
          readOnly: true
